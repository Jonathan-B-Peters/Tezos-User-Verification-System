{
  "text_code":
    "{ parameter\n    (or (or %asset\n           (or (list %burn nat)\n               (list %create_entry\n                  (pair (nat %token_id)\n                        (pair %metadata\n                           (string %title)\n                           (pair (map %nats string nat) (map %strings string string))))))\n           (list %mint_id address))\n        (or %fa2\n           (pair %balance_of\n              (list %requests (pair (address %owner) (nat %token_id)))\n              (contract %callback\n                 (list (pair (pair %request (address %owner) (nat %token_id)) (nat %balance)))))\n           (list %transfer\n              (pair (address %from_)\n                    (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))))) ;\n  storage\n    (pair (pair (big_map %ledger nat address)\n                (big_map %metadata\n                   nat\n                   (map string\n                        (pair (string %title) (pair (map %nats string nat) (map %strings string string))))))\n          (nat %next_token_id)) ;\n  code { LAMBDA\n           (pair bool string)\n           unit\n           { UNPAIR ; IF { FAILWITH } { DROP ; UNIT } } ;\n         SWAP ;\n         UNPAIR ;\n         PUSH string \"XTZ_RECIEVED\" ;\n         PUSH mutez 0 ;\n         AMOUNT ;\n         COMPARE ;\n         NEQ ;\n         PAIR ;\n         DUP 4 ;\n         SWAP ;\n         EXEC ;\n         DROP ;\n         IF_LEFT\n           { DIG 2 ;\n             DROP ;\n             IF_LEFT\n               { IF_LEFT\n                   { DROP ; NIL operation ; PAIR }\n                   { SWAP ;\n                     NIL operation ;\n                     PAIR ;\n                     SWAP ;\n                     ITER { SWAP ;\n                            DUP ;\n                            CDR ;\n                            DUP ;\n                            CDR ;\n                            DUP 3 ;\n                            CDR ;\n                            CAR ;\n                            CDR ;\n                            DIG 3 ;\n                            CDR ;\n                            CAR ;\n                            CDR ;\n                            DUP 5 ;\n                            CAR ;\n                            GET ;\n                            IF_NONE\n                              { EMPTY_MAP string (pair string (pair (map string nat) (map string string))) ;\n                                DUP 5 ;\n                                CDR ;\n                                DUP 6 ;\n                                CDR ;\n                                CAR ;\n                                SWAP ;\n                                SOME ;\n                                SWAP ;\n                                UPDATE }\n                              { DUP 5 ; CDR ; SOME ; DUP 6 ; CDR ; CAR ; UPDATE } ;\n                            SOME ;\n                            DIG 4 ;\n                            CAR ;\n                            UPDATE ;\n                            DIG 2 ;\n                            CAR ;\n                            CAR ;\n                            PAIR ;\n                            PAIR ;\n                            NIL operation ;\n                            PAIR } } }\n               { SWAP ;\n                 NIL operation ;\n                 PAIR ;\n                 SWAP ;\n                 ITER { SWAP ;\n                        PUSH nat 1 ;\n                        SWAP ;\n                        DUP ;\n                        DUG 2 ;\n                        CDR ;\n                        CDR ;\n                        ADD ;\n                        SWAP ;\n                        DUP ;\n                        DUG 2 ;\n                        CDR ;\n                        UNPAIR ;\n                        CDR ;\n                        DUP 4 ;\n                        CDR ;\n                        CAR ;\n                        CAR ;\n                        DIG 5 ;\n                        SOME ;\n                        DIG 5 ;\n                        CDR ;\n                        CDR ;\n                        UPDATE ;\n                        PAIR ;\n                        PAIR ;\n                        CAR ;\n                        PAIR ;\n                        NIL operation ;\n                        PAIR } } }\n           { IF_LEFT\n               { DIG 2 ;\n                 DROP ;\n                 DUP ;\n                 CAR ;\n                 MAP { DUP ;\n                       DUP 4 ;\n                       CAR ;\n                       CAR ;\n                       DUP 3 ;\n                       CDR ;\n                       GET ;\n                       IF_NONE\n                         { SWAP ; DROP ; PUSH nat 0 }\n                         { DIG 2 ; CAR ; COMPARE ; NEQ ; IF { PUSH nat 0 } { PUSH nat 1 } } ;\n                       SWAP ;\n                       PAIR } ;\n                 SWAP ;\n                 CDR ;\n                 PUSH mutez 0 ;\n                 DIG 2 ;\n                 TRANSFER_TOKENS ;\n                 SWAP ;\n                 NIL operation ;\n                 DIG 2 ;\n                 CONS ;\n                 PAIR }\n               { SWAP ;\n                 NIL operation ;\n                 PAIR ;\n                 SWAP ;\n                 ITER { SWAP ;\n                        PUSH string \"FA2_NOT_OPERATOR\" ;\n                        SENDER ;\n                        DUP 4 ;\n                        CAR ;\n                        COMPARE ;\n                        NEQ ;\n                        PAIR ;\n                        DUP 4 ;\n                        SWAP ;\n                        EXEC ;\n                        DROP ;\n                        PUSH string \"FA2_MULTIPLE_RECIPIENTS\" ;\n                        PUSH nat 1 ;\n                        DUP 4 ;\n                        CDR ;\n                        SIZE ;\n                        COMPARE ;\n                        GT ;\n                        PAIR ;\n                        DUP 4 ;\n                        SWAP ;\n                        EXEC ;\n                        DROP ;\n                        SWAP ;\n                        DUP ;\n                        DUG 2 ;\n                        CDR ;\n                        IF_CONS { SWAP ; DROP ; SOME } { NONE (pair address (pair nat nat)) } ;\n                        IF_NONE { PUSH string \"FA2_NO_RECIPIENT\" ; FAILWITH } {} ;\n                        SWAP ;\n                        DUP ;\n                        DUG 2 ;\n                        CDR ;\n                        CAR ;\n                        CAR ;\n                        SWAP ;\n                        DUP ;\n                        DUG 2 ;\n                        GET 3 ;\n                        GET ;\n                        IF_NONE\n                          { DIG 2 ; DROP ; PUSH string \"FA2_INVALID_TOKEN_ID\" ; FAILWITH }\n                          { PUSH string \"FA2_NOT_OWNER\" ;\n                            DIG 4 ;\n                            CAR ;\n                            DIG 2 ;\n                            COMPARE ;\n                            NEQ ;\n                            PAIR ;\n                            DUP 4 ;\n                            SWAP ;\n                            EXEC ;\n                            DROP } ;\n                        SWAP ;\n                        DUP ;\n                        DUG 2 ;\n                        CDR ;\n                        UNPAIR ;\n                        CDR ;\n                        DIG 3 ;\n                        CDR ;\n                        CAR ;\n                        CAR ;\n                        DUP 4 ;\n                        CAR ;\n                        SOME ;\n                        DIG 4 ;\n                        GET 3 ;\n                        UPDATE ;\n                        PAIR ;\n                        PAIR ;\n                        NIL operation ;\n                        PAIR } ;\n                 SWAP ;\n                 DROP } } } }"
}
